<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>D3 hw04 by paddytatsu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <script src="//d3js.org/d3.v3.js"></script>
</head>

<body>
    <section class="page-header">
        <h1 class="project-name">D3 hw04</h1>
        <h2 class="project-tagline"></h2>
        <a href="https://github.com/paddytatsu/D3_HW04" class="btn">View on GitHub</a>
        <a href="https://github.com/paddytatsu/D3_HW04/zipball/master" class="btn">Download .zip</a>
        <a href="https://github.com/paddytatsu/D3_HW04/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
        <h3>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>練習一</h3>

        <p>
            <svg class="svg1" width="420" height="250">
            </svg>

            <script>
                d3.json("invoice-taipei.json", function (dataSet) {
                    var svg = d3.select("svg");
                    var count = 0;
                    for (var i = 0; i < dataSet.length; i++) {
                        if (dataSet[i].date === "2016/8/1" && dataSet[i].cid === "A" && parseInt(dataSet[i].amount) > 1000000000) {
                            d3.select("svg")
                                .append("rect")
                                .attr({
                                    x: 200,
                                    y: 31 + 16 * count,
                                    width: parseInt(dataSet[i].amount) / 100000000,
                                    height: 10,
                                    fill: "red"
                                });
                            d3.select("svg")
                                .append("text")
                                .attr({
                                    x: 20,
                                    y: 40 + 16 * count,
                                    "font-size": 10
                                }).text(dataSet[i].industry);
                            count++;

                        }

                    }
                });
            </script>
        </p>

        <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>
        <h3>練習二</h3>

        <p id="two">
            <script>
        var arr = [85, 60, 99, 49, 77, 82];
        bind(arr);
        render();
        function bind(data) {
            var selecYon = d3.select("#two")
                .selectAll("div")
                .data(data);
            selecYon.enter().append("div")
            selecYon.exit().remove();
        }

        function render() {
            d3.selectAll("div").text(function (d, i) {
                return i + ":" + d;
            });
            d3.selectAll("div").style({
                color: function (d) {
                    if (d < 70) {
                        return "red";
                    } 
                    else {
                        return "black";
                    }
                }
            })
        }
    </script>

        </p>

        <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><h3>練習三</h3>
        
        </div>
<div class="third_col">
    <p>&nbsp;建立簡單長條圖表</p>
       
        <script>
            var w=800;
            var h=200;
            var p=50;
            
            var arr=[45,76,96,35,88,69];
            
            svg(w,h,p);
            bind(arr);
            render(w,h,p);
            bind2(arr);
            render2(w,h,p);
            
            function svg(w,h,p){
                d3.select("body")
                    .select(".third_col")
                    .append("svg").attr({
                    width: w,
                    height: h
                })
            };
            
            function update(){
                var num = random(20,100);
                arr.push(num);
                bind(arr);
                render(w,h,p);
                bind2(arr);
                render2(w,h,p);
            }
            
            function bind(data){ 
                var selection = 
                d3.select(".third_col")
                .select("svg") 
                .selectAll("rect")
                .data(data); 
                
                selection.enter().append("rect"); selection.exit().remove(); 
            }; 
            
            function render(w,h,p){ 
                d3.select(".third_col")
                .select("svg")
                .selectAll("rect").attr({
                    x: function(d,i){return p+45*i;},
                    y: function(d,i){return h-p-d;},
                    width: 40,
                    height: function(d){return d;},
                    fill: function(d){
                            if(d<70){
                                return "red";
                            }
                            else{
                                return "lightgreen";
                            }
                          },
         
                })
                
            };
            
            function bind2(data){
                var selection = 
                d3.select(".third_col")
                .select("svg") 
                .selectAll("text")
                .data(data); 
                
                selection.enter().append("text"); selection.exit().remove(); 
            }
            
            function render2(w,h,p){ 
                d3.select(".third_col")
                .select("svg").selectAll("text").attr({
                    x: function(d,i){return p+45*i+10;},
                    y: h - 30,
                    fill: "black"
                }).text(function(d){return d;})
                
            };
            
            function random(n, m) {
      return Math.ceil(Math.random() * (m - n) + n);
    }
            
        
        </script>
        <input type="button" value="新增" onclick="update()"><br>
        
        

        <footer class="site-footer">
            <span class="site-footer-owner"><a href="https://github.com/paddytatsu/D3_HW04">D3 hw04</a> is maintained by <a href="https://github.com/paddytatsu">paddytatsu</a>.</span>

            <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
        </footer>

    </section>


</body>

</html>